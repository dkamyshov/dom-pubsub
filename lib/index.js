"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.subscribeDOM = exports.publishDOM = void 0;

// inspired by https://github.com/luanre
// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent
(function () {
  if (typeof window.CustomEvent === "function") return false; // @ts-ignore

  function CustomEvent(event, params) {
    params = params || {
      bubbles: false,
      cancelable: false,
      detail: null
    };
    var evt = document.createEvent('CustomEvent');
    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
    return evt;
  } // @ts-ignore


  window.CustomEvent = CustomEvent;
})();

var publishDOM = function publishDOM(name, data) {
  var event = new CustomEvent(name, {
    detail: data
  });
  document.body.dispatchEvent(event);
};

exports.publishDOM = publishDOM;

var subscribeDOM = function subscribeDOM(name, callback) {
  document.body.addEventListener(name, function (evt) {
    return callback(evt.detail);
  });
};

exports.subscribeDOM = subscribeDOM;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJDdXN0b21FdmVudCIsImV2ZW50IiwicGFyYW1zIiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkZXRhaWwiLCJldnQiLCJkb2N1bWVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwicHVibGlzaERPTSIsIm5hbWUiLCJkYXRhIiwiYm9keSIsImRpc3BhdGNoRXZlbnQiLCJzdWJzY3JpYmVET00iLCJjYWxsYmFjayIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUdBO0FBQ0EsQ0FBQyxZQUFZO0FBRVQsTUFBSyxPQUFPQSxNQUFNLENBQUNDLFdBQWQsS0FBOEIsVUFBbkMsRUFBZ0QsT0FBTyxLQUFQLENBRnZDLENBSVQ7O0FBQ0EsV0FBU0EsV0FBVCxDQUF1QkMsS0FBdkIsRUFBOEJDLE1BQTlCLEVBQXVDO0FBQ25DQSxJQUFBQSxNQUFNLEdBQUdBLE1BQU0sSUFBSTtBQUFFQyxNQUFBQSxPQUFPLEVBQUUsS0FBWDtBQUFrQkMsTUFBQUEsVUFBVSxFQUFFLEtBQTlCO0FBQXFDQyxNQUFBQSxNQUFNLEVBQUU7QUFBN0MsS0FBbkI7QUFDQSxRQUFJQyxHQUFHLEdBQUdDLFFBQVEsQ0FBQ0MsV0FBVCxDQUFzQixhQUF0QixDQUFWO0FBQ0FGLElBQUFBLEdBQUcsQ0FBQ0csZUFBSixDQUFxQlIsS0FBckIsRUFBNEJDLE1BQU0sQ0FBQ0MsT0FBbkMsRUFBNENELE1BQU0sQ0FBQ0UsVUFBbkQsRUFBK0RGLE1BQU0sQ0FBQ0csTUFBdEU7QUFDQSxXQUFPQyxHQUFQO0FBQ0gsR0FWUSxDQVlUOzs7QUFDQVAsRUFBQUEsTUFBTSxDQUFDQyxXQUFQLEdBQXFCQSxXQUFyQjtBQUNILENBZEQ7O0FBZ0JPLElBQU1VLFVBQVUsR0FBRyxTQUFiQSxVQUFhLENBQUNDLElBQUQsRUFBZUMsSUFBZixFQUE2QjtBQUNuRCxNQUFNWCxLQUFLLEdBQUcsSUFBSUQsV0FBSixDQUFnQlcsSUFBaEIsRUFBc0I7QUFDaENOLElBQUFBLE1BQU0sRUFBRU87QUFEd0IsR0FBdEIsQ0FBZDtBQUdBTCxFQUFBQSxRQUFRLENBQUNNLElBQVQsQ0FBY0MsYUFBZCxDQUE0QmIsS0FBNUI7QUFDSCxDQUxNOzs7O0FBT0EsSUFBTWMsWUFBWSxHQUFHLFNBQWZBLFlBQWUsQ0FBQ0osSUFBRCxFQUFlSyxRQUFmLEVBQWlDO0FBQ3pEVCxFQUFBQSxRQUFRLENBQUNNLElBQVQsQ0FBY0ksZ0JBQWQsQ0FBK0JOLElBQS9CLEVBQXNDLFVBQUNMLEdBQUQ7QUFBQSxXQUFzQlUsUUFBUSxDQUFDVixHQUFHLENBQUNELE1BQUwsQ0FBOUI7QUFBQSxHQUF0QztBQUNILENBRk0iLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vbHVhbnJlXG5cblxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50L0N1c3RvbUV2ZW50XG4oZnVuY3Rpb24gKCkge1xuXG4gICAgaWYgKCB0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSBcImZ1bmN0aW9uXCIgKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKCBldmVudCwgcGFyYW1zICkge1xuICAgICAgICBwYXJhbXMgPSBwYXJhbXMgfHwgeyBidWJibGVzOiBmYWxzZSwgY2FuY2VsYWJsZTogZmFsc2UsIGRldGFpbDogbnVsbCB9O1xuICAgICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoICdDdXN0b21FdmVudCcgKTtcbiAgICAgICAgZXZ0LmluaXRDdXN0b21FdmVudCggZXZlbnQsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCApO1xuICAgICAgICByZXR1cm4gZXZ0O1xuICAgIH1cblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB3aW5kb3cuQ3VzdG9tRXZlbnQgPSBDdXN0b21FdmVudDtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBwdWJsaXNoRE9NID0gKG5hbWU6IHN0cmluZywgZGF0YTogYW55KSA9PiB7XG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQobmFtZSwge1xuICAgICAgICBkZXRhaWw6IGRhdGFcbiAgICB9KTtcbiAgICBkb2N1bWVudC5ib2R5LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xufTtcblxuZXhwb3J0IGNvbnN0IHN1YnNjcmliZURPTSA9IChuYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiBhbnkpID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgKChldnQ6IEN1c3RvbUV2ZW50KSA9PiBjYWxsYmFjayhldnQuZGV0YWlsKSkgYXMgRXZlbnRMaXN0ZW5lcik7XG59O1xuIl19